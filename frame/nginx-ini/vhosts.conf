server {
        listen       80;
        listen [::]:80;
        server_name api.bb.cn;
        
        #set $mobilecode "0";
        #if ($query_string ~* "mobileCode") {
            #set $mobilecode "1";
        #}

        #if ($http_user_agent !~* "Spanner|okhttp") {
            #set $mobilecode "${mobilecode}1";
        #}

        #if ($mobilecode = "11") {
            #return 400; 
        #}
        
        set $rootdir "E:/work/卓众出版事业3部/bd banban/htdocs/banshou";
        set $runMode "devel";
        
        root $rootdir;
        index api.php;
        
        location / {
            if (!-e $request_filename) {   
              rewrite  ^(.*)$  /api.php?s=$1  last;   
              break;
            }
         }
            
        set $yii_bootstrap "api.php";
        location ~ \.php {
            fastcgi_split_path_info  ^(.+\.php)(.*)$;

            set $fsn /$yii_bootstrap;
            if (-f $document_root$fastcgi_script_name){
                    set $fsn $fastcgi_script_name;
            }

            fastcgi_pass   127.0.0.1:9000;#unix:/var/run/php5-fpm.sock;
            include fastcgi_params;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

            fastcgi_param  PATH_INFO        $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
            fastcgi_param   RUN_MODE    $runMode;
    }
}

server {
        listen       80;
        #listen [::]:80;
        server_name api.bb.cc;
        
        #set $mobilecode "0";
        #if ($query_string ~* "mobileCode") {
            #set $mobilecode "1";
        #}

        #if ($http_user_agent !~* "Spanner|okhttp") {
            #set $mobilecode "${mobilecode}1";
        #}

        #if ($mobilecode = "11") {
            #return 400; 
        #}

        set $rootdir "E:/work/zzcbthree/banban/htdocs/banshou";
        set $runMode "devel";
        
        root $rootdir;
        index api.php;
        
        location / {
            if (!-e $request_filename) {   
              rewrite  ^(.*)$  /api.php?s=$1  last;   
              break;
            }
         }
            
        set $yii_bootstrap "api.php";
        location ~ \.php {
            fastcgi_split_path_info  ^(.+\.php)(.*)$;

            set $fsn /$yii_bootstrap;
            if (-f $document_root$fastcgi_script_name){
                    set $fsn $fastcgi_script_name;
            }

            fastcgi_pass   127.0.0.1:9000;#unix:/var/run/php5-fpm.sock;
            include fastcgi_params;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

            fastcgi_param  PATH_INFO        $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
            fastcgi_param   RUN_MODE    $runMode;
    }
}

server {
        listen       80;
        #listen [::]:80;
        server_name 192.168.137.245;
        
        #set $mobilecode "0";
        #if ($query_string ~* "mobileCode") {
            #set $mobilecode "1";
        #}

        #if ($http_user_agent !~* "Spanner|okhttp") {
            #set $mobilecode "${mobilecode}1";
        #}

        #if ($mobilecode = "11") {
            #return 400; 
        #}

        set $rootdir "E:/work/zzcbthree/banban/htdocs/banshou";
        set $runMode "devel";
        
        root $rootdir;
        index api.php;
        
        location / {
            if (!-e $request_filename) {   
              rewrite  ^(.*)$  /api.php?s=$1  last;   
              break;
            }
         }
            
        set $yii_bootstrap "api.php";
        location ~ \.php {
            fastcgi_split_path_info  ^(.+\.php)(.*)$;

            set $fsn /$yii_bootstrap;
            if (-f $document_root$fastcgi_script_name){
                    set $fsn $fastcgi_script_name;
            }

            fastcgi_pass   127.0.0.1:9000;#unix:/var/run/php5-fpm.sock;
            include fastcgi_params;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;

            fastcgi_param  PATH_INFO        $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
            fastcgi_param   RUN_MODE    $runMode;
    }
}

server {
    listen 80;
    server_name admin.bb.cc;
    #access_log /home/y/var/log/nginx/banshou_access_sys.log;
    #error_log /home/y/var/log/nginx/banshou_error_sys.log;
    
    set $rootdir "E:/work/zzcbthree/banban/htdocs/banshou_sys_admin/public";
    set $runMode "devel";
    set $yii_bootstrap "index.php";
    
    index index.php index.html;
    root $rootdir;

    location / {
        if (!-e $request_filename) {
            rewrite  ^(.*)$  /index.php?s=/$1  last;
            break;
        }
    }

    location ~ \.php {
        fastcgi_split_path_info  ^(.+\.php)(.*)$;

        set $fsn /$yii_bootstrap;
        if (-f $document_root$fastcgi_script_name){
            set $fsn $fastcgi_script_name;
        }

        fastcgi_pass   127.0.0.1:9000;
        include fastcgi_params;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fsn;
        fastcgi_param  PATH_INFO        $fastcgi_path_info;
        fastcgi_param  PATH_TRANSLATED  $document_root$fsn;
        fastcgi_param   RUN_MODE    $runMode;
    }	
}


server {
        listen       80;
        server_name my.test.cc;
        root   "E:/my test/yii-1.1.15.022a51/";
        index  index.php;
        
        location / {
            if (!-e $request_filename) {   
              rewrite  ^(.*)$  /index.php?s=$1  last;   
              break;
            } 
            
            #autoindex  on;
        }
        location ~ \.php(.*)$ {
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }
}

server {
        listen       80;
        server_name my.im.cc;
        root   "E:/work/test/wangyi-im/webdemo";
        index  index.html;
        
        
        location ~ \.php(.*)$ {
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.html;
            #fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }
}